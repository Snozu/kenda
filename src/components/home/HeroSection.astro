---
import Button from '../ui/shadcn/Button.astro';
import { Image } from 'astro:assets';

// Estado para el envío del formulario
const formSubmitted = false;
---

<section id="hero" class="h-screen w-full relative overflow-hidden">
  <!-- Fondo de gradiente y pista -->
  <div class="absolute inset-0 z-0">
    <!-- Imagen de fondo (pista) con cuadrícula -->
    <div class="absolute inset-0 bg-cover bg-center grid-bg opacity-20" style="background-image: url('/images/hero/track.jpg')"></div>
    
    <!-- Mapa de México con overlay rojo -->
    <div class="absolute top-0 right-0 h-full w-1/2 bg-kenda-red">
      <div class="absolute inset-0">
        <img src="/images/hero/mexico-map.png" alt="" class="absolute h-full object-contain right-0 opacity-30" />
      </div>
    </div>
  </div>
  
  <!-- Contenido principal con logos -->
  <div class="relative z-10 h-full w-full px-4 sm:px-6 lg:px-8 flex flex-col">
    <!-- Header con logos - corregido posicionamiento -->
    <div class="flex justify-between items-center py-6">
      <!-- Logo KENDA a la izquierda -->
      <div class="flex-shrink-0">
        <img src="/images/kenda-logo.svg" alt="KENDA" class="h-10 md:h-12" />
      </div>
      
      <!-- Logo Motos y Equipos a la derecha -->
      <div class="flex-shrink-0">
        <img src="/images/motos-equipos-logo-white.svg" alt="Motos y Equipos" class="h-8 md:h-10" />
      </div>
    </div>
    
    <!-- Contenido central -->
    <div class="flex-grow flex items-center">
      <div class="max-w-xl">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-black text-black mb-6 animate-fade-in leading-tight">
          ¿Te interesa ser<br>Distribuidor KENDA?
        </h1>
        
        <p class="text-lg md:text-xl text-black mb-10 font-light">
          Déjanos tu correo para agendar una llamada
        </p>
        
        <!-- Tarjeta de registro - estilo mejorado -->
        <div class="bg-white rounded-lg p-6 shadow-lg animate-slide-up w-full max-w-md">
          <form id="hero-form" class="space-y-4">
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-1 font-semibold">Empezar registro:</label>
              <div class="relative">
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="w-full px-4 py-3 bg-gray-200 border-0 rounded-md focus:ring-2 focus:ring-kenda-orange focus:border-transparent font-light"
                  placeholder="Escribe tu correo electrónico"
                  required
                />
              </div>
            </div>
            
            <button
              type="submit"
              id="submit-button"
              class="w-full bg-kenda-orange hover:bg-orange-600 text-white font-semibold py-3 px-4 rounded-md transition-all duration-300 flex items-center justify-center relative overflow-hidden"
            >
              <span id="button-text" class="flex items-center transition-transform duration-300">
                Enviar
                <span id="button-icon" class="ml-2 transition-all duration-300">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                  </svg>
                </span>
              </span>
              
              <span id="button-success" class="absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-300">
                <span class="flex items-center">
                  Enviado correctamente
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 ml-2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                  </svg>
                </span>
              </span>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Decoración: Imagen de neumático en la esquina inferior izquierda -->
  <img 
    src="/images/tire.png" 
    alt="" 
    class="absolute bottom-0 left-0 w-48 h-48 object-contain opacity-70 z-10"
  />
</section>

<!-- Script para manejar el envío del formulario y la animación del botón -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('hero-form') as HTMLFormElement;
    const submitButton = document.getElementById('submit-button');
    const buttonText = document.getElementById('button-text');
    const buttonSuccess = document.getElementById('button-success');
    const buttonIcon = document.getElementById('button-icon');
    
    if (form) {
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Obtener el email
        const emailInput = document.getElementById('email') as HTMLInputElement;
        const email = emailInput.value;
        
        if (email) {
          // Deshabilitar el botón durante el envío
          submitButton?.setAttribute('disabled', 'true');
          
          // Animar el icono
          buttonIcon?.classList.add('-translate-x-2');
          
          // Simular envío (en un caso real, aquí iría la llamada a la API de Make)
          setTimeout(() => {
            // Mostrar mensaje de éxito
            buttonText?.classList.add('opacity-0');
            buttonSuccess?.classList.remove('opacity-0');
            buttonSuccess?.classList.add('opacity-100');
            
            // Reiniciar el formulario después de un tiempo
            setTimeout(() => {
              form.reset();
              submitButton?.removeAttribute('disabled');
              buttonText?.classList.remove('opacity-0');
              buttonSuccess?.classList.remove('opacity-100');
              buttonSuccess?.classList.add('opacity-0');
              buttonIcon?.classList.remove('-translate-x-2');
            }, 3000);
          }, 1000);
        }
      });
    }
  });
</script>

<style>
  /* Fondo de cuadrícula */
  .grid-bg {
    background-image: linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                     linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
  }
  
  /* Asegurándonos de que las animaciones estén definidas */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slide-up {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  
  .animate-fade-in {
    animation: fade-in 0.8s ease-out forwards;
  }
  
  .animate-slide-up {
    animation: slide-up 0.6s ease-out forwards;
  }
  
  /* Asegurarnos de que los colores personalizados estén disponibles */
  .bg-kenda-red {
    background-color: #E32726;
  }
  
  .bg-kenda-orange {
    background-color: #F7941D;
  }
  
  .focus\:ring-kenda-orange:focus {
    --tw-ring-color: #F7941D;
  }
</style>